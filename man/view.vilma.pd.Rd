% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/view.vilma.pd.R
\name{view.vilma.pd}
\alias{view.vilma.pd}
\title{View \code{vilma.pd} Rasters in an Interactive Leaflet Map}
\usage{
view.vilma.pd(pd)
}
\arguments{
\item{pd}{A \code{vilma.pd} object containing a named list \code{pd$rasters}
of \pkg{terra} \code{SpatRaster} layers. The element
\code{pd$rasters$ab.raster} is used to compute the initial map center.}
}
\value{
A \pkg{leaflet} \code{htmlwidget} map.
}
\description{
Renders all rasters stored in a \code{vilma.pd} object as toggleable
overlays in a Leaflet map, using \pkg{viridisLite} color ramps and
on-map legends. Pixel values are shown on hover via \pkg{leafem}.
}
\details{
\strong{Verification:} The function checks that \code{pd} is of class
\code{"vilma.pd"} and that \code{pd$rasters} exists and is non-empty.

\strong{Centering:} The initial view is centered on the midpoint of the
extent of \code{pd$rasters$ab.raster}.

\strong{Color mapping:} For each raster, a numeric color function is created
with \code{viridis(256, option = "D")}, mapped over the raster's value range
(NAs ignored). Legends are added with the raster name as the title.

\strong{Interaction:} Raster values are queried on mouse move using
\code{leafem::addImageQuery(project = TRUE)}, displaying a live readout
(rounded to 2 decimals) in the top-right corner.

\strong{Layers:} Two base maps labeled "Esri" and "Carto" are added and a
layers control allows toggling of raster overlays. By default, all overlays
except the third (if present) are hidden, so the third raster is visible at
load.
}
\section{Performance}{

Very large rasters can be slow in browsers. Consider aggregating
(\code{terra::aggregate()}) or tiling before viewing.
}

\examples{
\dontrun{
tree <- example_tree()
dist <- example_dist()
dist <- points_to_raster(dist)
pd <- faith.pd(tree, dist)
view.vilma.pd(pd)
}

}
\seealso{
\code{\link[leaflet]{leaflet}},
\code{\link[leaflet]{addRasterImage}},
\code{\link[leafem]{addImageQuery}},
\code{\link[viridisLite]{viridis}},
\code{\link[terra]{ext}}
}
\author{
Omar Daniel Leon-Alvarado \url{https://leon-alvarado.weebly.com}
J. Angel Soto-Centeno \url{https://www.mormoops.com}
}
