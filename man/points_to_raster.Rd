% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/points_to_raster.R
\name{points_to_raster}
\alias{points_to_raster}
\title{Convert Species Occurrence Points to Raster Distribution}
\usage{
points_to_raster(
  points,
  crs = 4326,
  ext = NULL,
  res = 1,
  doRast = TRUE,
  symmetrical = FALSE
)
}
\arguments{
\item{points}{A \code{matrix} or \code{data.frame} with exactly three columns,
in the order: Species, Longitude, Latitude.}

\item{crs}{Coordinate Reference System. Either an EPSG code as integer
(e.g., \code{4326} for WGS84) or a PROJ string. Defaults to EPSG:4326.}

\item{ext}{A \code{terra::ext} extent defining output raster bounds. If \code{NULL}
(default), the extent is computed from \code{points} and buffered slightly.}

\item{res}{Numeric resolution of the output grid in CRS units. Either a single
value (square cells; \code{xres = yres}) or a length-2 numeric vector
\code{c(xres, yres)}. Defaults to \code{1} (degrees if CRS is geographic).}

\item{doRast}{Logical; if \code{TRUE} (default) raster layers are created
(richness and abundance). If \code{FALSE}, returns only the distribution
table and the grid definition.}

\item{symmetrical}{Logical; if \code{TRUE}, forces square pixels by setting
\code{yres <- xres} and snaps the extent so that its width/height are exact
multiples of the (possibly forced) resolution. Default \code{FALSE}.}
}
\value{
An object of class \code{vilma.dist} with:
\itemize{
\item \code{distribution}: \code{data.frame} with original points and their \code{Cell} IDs.
\item \code{grid}: \code{terra::SpatRaster} template grid.
\item \code{r.raster}: richness raster (\verb{#} unique species per cell) or \code{NULL}.
\item \code{ab.raster}: abundance raster (\verb{#} records per cell) or \code{NULL}.
}
}
\description{
Converts species occurrence points (Species, Longitude, Latitude) to a
\code{vilma.dist} object that includes a template grid and (optionally)
raster layers of species richness and abundance per cell.
}
\details{
\strong{Resolution and symmetry:} \code{res} can be a scalar or \code{c(xres, yres)}.
When \code{symmetrical = TRUE}, the function enforces \code{yres = xres} and
snaps the extent to whole-cell multiples, ensuring symmetric (square) pixels.

\strong{On geographic CRSs:} If the CRS is geographic (lon/lat), square cells
are \emph{square degrees}, not equal-area squares. For equal-area, project to
an appropriate (equal-area) CRS before calling this function.

\strong{Outputs:} Cell IDs are assigned via \code{terra::cellFromXY}. If
\code{doRast = TRUE}, abundance is computed as record counts per cell and
richness as the number of unique species per cell.
}
\examples{
\dontrun{
# Sample occurrence data
tree <- examplae_tree()
dist <- example_dist()

# Rectangular cells (0.5 x 0.25 degrees)
d2 <- points_to_raster(dist, res = c(0.5, 0.25))

# Force square cells with snapping (use xres = 0.25)
d3 <- points_to_raster(dist, res = 0.25, symmetrical = TRUE)

# Return only table + grid (no rasters)
d4 <- points_to_raster(dist, doRast = FALSE)
}
}
\author{
Omar Daniel Leon-Alvarado \url{https://leon-alvarado.weebly.com}
J. Angel Soto-Centeno \url{https://www.mormoops.com}
}
